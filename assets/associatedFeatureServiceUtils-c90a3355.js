import{aA as t,dx as L,av as s,dE as f,dF as T,aw as m,ax as y,gh as D}from"./index-c0f955a7.js";const R={BingMapsLayer:async()=>(await t(()=>import("./BingMapsLayer-0aa8b1e3.js"),["./BingMapsLayer-0aa8b1e3.js","./index-c0f955a7.js","./index-c3d91843.css","./imageBitmapUtils-bc183da3.js"],import.meta.url)).default,BuildingSceneLayer:async()=>(await t(()=>import("./BuildingSceneLayer-9d7f1f63.js"),["./BuildingSceneLayer-9d7f1f63.js","./index-c0f955a7.js","./index-c3d91843.css","./BuildingComponentSublayer-568a4c8f.js","./capabilities-c607cf72.js","./I3SIndexInfo-5ce9237d.js","./I3SLayerDefinitions-3194b507.js","./I3SUtil-00117a32.js","./I3SBinaryReader-ce9ec7ac.js","./popupUtils-424614c6.js","./BuildingGroupSublayer-f82ef256.js","./SceneService-85616285.js","./elevationInfoUtils-fe734b95.js"],import.meta.url)).default,CSVLayer:async()=>(await t(()=>import("./index-c0f955a7.js").then(e=>e.xW),["./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,DimensionLayer:async()=>(await t(()=>import("./DimensionLayer-cf357030.js"),["./DimensionLayer-cf357030.js","./index-c0f955a7.js","./index-c3d91843.css","./Analysis-8dee3d57.js","./LengthDimension-cb7d380d.js"],import.meta.url)).default,ElevationLayer:async()=>(await t(()=>import("./ElevationLayer-d951f11e.js"),["./ElevationLayer-d951f11e.js","./index-c0f955a7.js","./index-c3d91843.css","./ArcGISCachedService-4a34c99d.js","./TileInfoTilemapCache-686e3956.js","./TilemapCache-0c96136b.js"],import.meta.url)).default,FeatureLayer:async()=>(await t(()=>import("./index-c0f955a7.js").then(e=>e.xV),["./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,GeoJSONLayer:async()=>(await t(()=>import("./GeoJSONLayer-90a0ca96.js"),["./GeoJSONLayer-90a0ca96.js","./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,GeoRSSLayer:async()=>(await t(()=>import("./GeoRSSLayer-6162d654.js"),["./GeoRSSLayer-6162d654.js","./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,GroupLayer:async()=>(await t(()=>import("./GroupLayer-2a218b08.js"),["./GroupLayer-2a218b08.js","./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,ImageryLayer:async()=>(await t(()=>import("./ImageryLayer-d4938606.js"),["./ImageryLayer-d4938606.js","./index-c0f955a7.js","./index-c3d91843.css","./ImageHistogramParameters-16ac76bc.js","./dataUtils-3396c02a.js","./generateRendererUtils-f5995837.js","./imageBitmapUtils-bc183da3.js","./executeQueryJSON-b46d6877.js","./query-51127c95.js","./pbfQueryUtils-51148051.js","./pbf-334ee1bd.js","./AttachmentInfo-6f2d2eca.js","./executeForIds-2fabdd1f.js"],import.meta.url)).default,ImageryTileLayer:async()=>(await t(()=>import("./ImageryTileLayer-91ca3f54.js"),["./ImageryTileLayer-91ca3f54.js","./index-c0f955a7.js","./index-c3d91843.css","./ImageHistogramParameters-16ac76bc.js","./dataUtils-3396c02a.js","./generateRendererUtils-f5995837.js","./rasterProjectionHelper-04f7c394.js","./utils-e4874252.js","./TilemapCache-0c96136b.js"],import.meta.url)).default,IntegratedMeshLayer:async()=>(await t(()=>import("./IntegratedMeshLayer-bf2779f7.js"),["./IntegratedMeshLayer-bf2779f7.js","./index-c0f955a7.js","./index-c3d91843.css","./persistable-585a2b37.js","./resourceExtension-6591026e.js","./SceneService-85616285.js","./I3SIndexInfo-5ce9237d.js","./I3SLayerDefinitions-3194b507.js","./SceneModification-c9819a6f.js","./elevationInfoUtils-fe734b95.js"],import.meta.url)).default,KMLLayer:async()=>(await t(()=>import("./KMLLayer-f7c5c918.js"),["./KMLLayer-f7c5c918.js","./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,LineOfSightLayer:async()=>(await t(()=>import("./LineOfSightLayer-302f74f0.js"),["./LineOfSightLayer-302f74f0.js","./index-c0f955a7.js","./index-c3d91843.css","./Analysis-8dee3d57.js","./LineOfSightAnalysisTarget-43dbc60a.js","./persistable-585a2b37.js","./resourceExtension-6591026e.js","./elevationInfoUtils-fe734b95.js"],import.meta.url)).default,LinkChartLayer:async()=>(await t(()=>import("./LinkChartLayer-2eeb2c8a.js"),["./LinkChartLayer-2eeb2c8a.js","./index-c0f955a7.js","./index-c3d91843.css","./geohashUtils-77d8429b.js","./FeatureStore-312d326c.js","./BoundsStore-be95aa6d.js","./PooledRBush-46c240a2.js","./quickselect-4a5a9977.js","./QueryEngine-44ece2b8.js","./WhereClause-9d21e01b.js","./TimeOnly-05b40277.js","./json-48e3ea08.js","./utils-097bae63.js","./utils-af61b1ad.js","./generateRendererUtils-f5995837.js","./optimizedFeatureQueryEngineAdapter-66ec8a44.js"],import.meta.url)).default,MapImageLayer:async()=>(await t(()=>import("./MapImageLayer-18b7240e.js"),["./MapImageLayer-18b7240e.js","./index-c0f955a7.js","./index-c3d91843.css","./SublayersOwner-2a61e960.js","./QueryTask-82d13375.js","./executeForIds-2fabdd1f.js","./query-51127c95.js","./pbfQueryUtils-51148051.js","./pbf-334ee1bd.js","./executeQueryJSON-b46d6877.js","./executeQueryPBF-226ff4ca.js","./sublayerUtils-7a445087.js","./ExportImageParameters-d837b18a.js","./floorFilterUtils-73949d2d.js","./imageBitmapUtils-bc183da3.js"],import.meta.url)).default,MapNotesLayer:async()=>(await t(()=>import("./MapNotesLayer-6a67e455.js"),["./MapNotesLayer-6a67e455.js","./index-c0f955a7.js","./index-c3d91843.css","./objectIdUtils-967fafff.js"],import.meta.url)).default,MediaLayer:async()=>(await t(()=>import("./MediaLayer-d0d153c7.js"),["./MediaLayer-d0d153c7.js","./index-c0f955a7.js","./index-c3d91843.css","./MediaElementView-89d8b39c.js","./normalizeUtilsSync-55e54404.js","./resourceExtension-6591026e.js","./BoundsStore-be95aa6d.js","./PooledRBush-46c240a2.js","./quickselect-4a5a9977.js"],import.meta.url)).default,OGCFeatureLayer:async()=>(await t(()=>import("./OGCFeatureLayer-2c6ac0f3.js"),["./OGCFeatureLayer-2c6ac0f3.js","./index-c0f955a7.js","./index-c3d91843.css","./ogcFeatureUtils-13164435.js","./geojson-e5e4b4d2.js","./date-430969b3.js"],import.meta.url)).default,OpenStreetMapLayer:async()=>(await t(()=>import("./OpenStreetMapLayer-bf2dab38.js"),["./OpenStreetMapLayer-bf2dab38.js","./index-c0f955a7.js","./index-c3d91843.css","./WebTileLayer-1e337183.js","./imageBitmapUtils-bc183da3.js"],import.meta.url)).default,OrientedImageryLayer:async()=>(await t(()=>import("./OrientedImageryLayer-568fb407.js"),["./OrientedImageryLayer-568fb407.js","./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,PointCloudLayer:async()=>(await t(()=>import("./PointCloudLayer-9164f6ce.js"),["./PointCloudLayer-9164f6ce.js","./index-c0f955a7.js","./index-c3d91843.css","./SceneService-85616285.js","./I3SIndexInfo-5ce9237d.js","./PointCloudUniqueValueRenderer-95a3111a.js","./elevationInfoUtils-fe734b95.js"],import.meta.url)).default,RouteLayer:async()=>(await t(()=>import("./RouteLayer-078e412e.js"),["./RouteLayer-078e412e.js","./index-c0f955a7.js","./index-c3d91843.css","./Stop-c40829c5.js"],import.meta.url)).default,SceneLayer:async()=>(await t(()=>import("./SceneLayer-1c1f1fe2.js"),["./SceneLayer-1c1f1fe2.js","./index-c0f955a7.js","./index-c3d91843.css","./SceneService-85616285.js","./I3SIndexInfo-5ce9237d.js","./capabilities-c607cf72.js","./I3SLayerDefinitions-3194b507.js","./persistable-585a2b37.js","./resourceExtension-6591026e.js","./elevationInfoUtils-fe734b95.js","./I3SUtil-00117a32.js","./I3SBinaryReader-ce9ec7ac.js","./popupUtils-424614c6.js"],import.meta.url)).default,StreamLayer:async()=>(await t(()=>import("./index-c0f955a7.js").then(e=>e.xX),["./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,SubtypeGroupLayer:async()=>(await t(()=>import("./SubtypeGroupLayer-84f3e286.js"),["./SubtypeGroupLayer-84f3e286.js","./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,TileLayer:async()=>(await t(()=>import("./TileLayer-c2147f7d.js"),["./TileLayer-c2147f7d.js","./index-c0f955a7.js","./index-c3d91843.css","./ArcGISCachedService-4a34c99d.js","./TileInfoTilemapCache-686e3956.js","./TilemapCache-0c96136b.js","./SublayersOwner-2a61e960.js","./QueryTask-82d13375.js","./executeForIds-2fabdd1f.js","./query-51127c95.js","./pbfQueryUtils-51148051.js","./pbf-334ee1bd.js","./executeQueryJSON-b46d6877.js","./executeQueryPBF-226ff4ca.js","./sublayerUtils-7a445087.js","./imageBitmapUtils-bc183da3.js"],import.meta.url)).default,UnknownLayer:async()=>(await t(()=>import("./UnknownLayer-fa4d788d.js"),["./UnknownLayer-fa4d788d.js","./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,UnsupportedLayer:async()=>(await t(()=>import("./UnsupportedLayer-ec3167b1.js"),["./UnsupportedLayer-ec3167b1.js","./index-c0f955a7.js","./index-c3d91843.css"],import.meta.url)).default,VectorTileLayer:async()=>(await t(()=>import("./VectorTileLayer-ccd24e7e.js"),["./VectorTileLayer-ccd24e7e.js","./index-c0f955a7.js","./index-c3d91843.css","./ArcGISCachedService-4a34c99d.js","./TileInfoTilemapCache-686e3956.js","./TilemapCache-0c96136b.js","./jsonContext-ecb82249.js","./StyleRepository-f979d920.js","./TileClipper-ae6eca9e.js","./definitions-b2b7fe84.js"],import.meta.url)).default,VoxelLayer:async()=>(await t(()=>import("./VoxelLayer-bebc76d9.js"),["./VoxelLayer-bebc76d9.js","./index-c0f955a7.js","./index-c3d91843.css","./SceneService-85616285.js","./I3SIndexInfo-5ce9237d.js","./persistable-585a2b37.js","./resourceExtension-6591026e.js"],import.meta.url)).default,WFSLayer:async()=>(await t(()=>import("./WFSLayer-25e2cc5c.js"),["./WFSLayer-25e2cc5c.js","./index-c0f955a7.js","./index-c3d91843.css","./wfsUtils-49f17520.js","./geojson-e5e4b4d2.js","./date-430969b3.js","./xmlUtils-444cb4c0.js"],import.meta.url)).default,WMSLayer:async()=>(await t(()=>import("./WMSLayer-ca9efce8.js"),["./WMSLayer-ca9efce8.js","./index-c0f955a7.js","./index-c3d91843.css","./crsUtils-3bab3d8c.js","./ExportWMSImageParameters-89167c00.js","./imageBitmapUtils-bc183da3.js"],import.meta.url)).default,WMTSLayer:async()=>(await t(()=>import("./WMTSLayer-0b1dc381.js"),["./WMTSLayer-0b1dc381.js","./index-c0f955a7.js","./index-c3d91843.css","./WebTileLayer-1e337183.js","./imageBitmapUtils-bc183da3.js","./TileInfoTilemapCache-686e3956.js","./crsUtils-3bab3d8c.js","./xmlUtils-444cb4c0.js"],import.meta.url)).default,WebTileLayer:async()=>(await t(()=>import("./WebTileLayer-1e337183.js").then(e=>e.W),["./WebTileLayer-1e337183.js","./index-c0f955a7.js","./index-c3d91843.css","./imageBitmapUtils-bc183da3.js"],import.meta.url)).default};async function h(e,i){const r=L(e);if(!r)throw new s("invalid-url","Invalid scene service url");const a={...i,sceneServerUrl:r.url.path,layerId:r.sublayer??void 0};if(a.sceneLayerItem??(a.sceneLayerItem=await A(a)),a.sceneLayerItem==null)return p(a.sceneServerUrl.replace("/SceneServer","/FeatureServer"),a);const o=await V(a);if(!o?.url)throw new s("related-service-not-found","Could not find feature service through portal item relationship");const _=await p(o.url,a);return _.portalItem=o,_}async function A(e){const i=(await E(e)).serviceItemId;if(!i)return null;const r=new f({id:i,apiKey:e.apiKey}),a=await O(e);a!=null&&(r.portal=new T({url:a}));try{return r.load({signal:e.signal})}catch(o){return m(o),null}}async function E(e){if(e.rootDocument)return e.rootDocument;const i={query:{f:"json",token:e.apiKey},responseType:"json",signal:e.signal};try{const r=await y(e.sceneServerUrl,i);e.rootDocument=r.data}catch{e.rootDocument={}}return e.rootDocument}async function O(e){const i=D?.findServerInfo(e.sceneServerUrl);if(i?.owningSystemUrl)return i.owningSystemUrl;const r=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const a=(await y(r,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(a)return a}catch(a){m(a)}return null}async function p(e,i){const r=L(e);if(!r)throw new s("invalid-feature-service-url","Invalid feature service url");const a=r.url.path,o=i.layerId;if(o==null)return{serverUrl:a};const _=E(i),d=n=>{const I={query:{f:"json"},responseType:"json",authMode:n,signal:i.signal};return y(a,I)},v=d("anonymous").catch(()=>d("no-prompt")),[c,w]=await Promise.all([v,_]),l=w?.layers,u=c.data&&c.data.layers;if(!Array.isArray(u))throw new Error("expected layers array");if(Array.isArray(l)){for(let n=0;n<Math.min(l.length,u.length);n++)if(l[n].id===o)return{serverUrl:a,layerId:u[n].id}}else if(o!=null&&o<u.length)return{serverUrl:a,layerId:u[o].id};throw new Error("could not find matching associated sublayer")}async function V({sceneLayerItem:e,signal:i}){if(!e)return null;try{const r=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:i})).find(o=>o.type==="Feature Service")||null;if(!r)return null;const a=new f({portal:r.portal,id:r.id});return await a.load(),a}catch(r){return m(r),null}}export{R as a,h as l};
